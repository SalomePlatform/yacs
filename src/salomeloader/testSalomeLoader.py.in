#!/usr/bin/env python

import sys
import os

# --- top_builddir is used in make check
# --- top_srcdir is used in make distcheck

sys.path.insert(0,"@srcdir@")
sys.path.insert(0,"@top_builddir@/src/engine")
sys.path.insert(0,"@top_builddir@/src/runtime")
sys.path.insert(0,"@top_builddir@/src/engine/.libs")
sys.path.insert(0,"@top_builddir@/src/runtime/.libs")
sys.path.insert(0,"@top_srcdir@/src/engine")
sys.path.insert(0,"@top_srcdir@/src/runtime")

import unittest
import pilot
import SALOMERuntime
import salomeloader

class TestSalomeLoader(unittest.TestCase):
  def setUp(self):
    SALOMERuntime.RuntimeSALOME_setRuntime()
    self.loader=salomeloader.SalomeLoader()

  def test1(self):
    """test GeomGraph.xml"""
    p= self.loader.load(os.path.join("@srcdir@","samples","GeomGraph.xml"))
    p.saveSchema("tata.xml")

  def test2(self):
    """test GeomGraphGates_py.xml"""
    p= self.loader.load(os.path.join("@srcdir@","samples","GeomGraphGates_py.xml"))
    p.saveSchema("tata.xml")

  def test3(self):
    """test GeomGraphGates.xml"""
    p= self.loader.load(os.path.join("@srcdir@","samples","GeomGraphGates.xml"))
    p.saveSchema("tata.xml")

  def test4(self):
    """test GeomGraph_py.xml"""
    p= self.loader.load(os.path.join("@srcdir@","samples","GeomGraph_py.xml"))
    p.saveSchema("tata.xml")

  def test5(self):
    """test Graph_couronne.xml"""
    p= self.loader.load(os.path.join("@srcdir@","samples","Graph_couronne.xml"))
    p.saveSchema("tata.xml")

  def test6(self):
    """test testvisu20.xml"""
    p= self.loader.load(os.path.join("@srcdir@","samples","testvisu20.xml"))
    p.saveSchema("tata.xml")

U = os.getenv('USER')
f=open("/tmp/" + U + "/UnitTestsResult", 'a')
f.write("  --- TEST src/salomeloader: testSalomeLoader.py\n")
suite = unittest.makeSuite(TestSalomeLoader)
result=unittest.TextTestRunner(f, descriptions=1, verbosity=1).run(suite)
f.close()
sys.exit(not result.wasSuccessful())

